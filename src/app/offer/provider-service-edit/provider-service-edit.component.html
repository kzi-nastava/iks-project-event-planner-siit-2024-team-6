<div class="form-page">
    <!-- Floating Back Button -->
    <button class="floating-back-btn" (click)="goBack()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        class="back-icon"
      >
        <path d="M15.5 19.5 6 12l9.5-7.5v15Z" fill="white" />
      </svg>
    </button>
  
    <!-- Service Form -->
    <form class="form" [formGroup]="serviceForm" (ngSubmit)="onSubmit()">
      <h2>Edit Service</h2>
  
      <!-- Service Name -->
      <div class="form-group">
        <label for="name">Service Name:</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          placeholder="Enter the service name"
          required
        />
        <div *ngIf="serviceForm.get('name')?.touched && serviceForm.get('name')?.errors?.['required']" class="error-message">
          Service name is required.
         </div>
      </div>

       <!-- Event Types -->
       <div class="form-group">
        <label>Event Types:</label>
        <div *ngFor="let eventType of eventTypes; let i = index" class="checkbox-group">
          <label>
            <input
              type="checkbox"
              [value]="eventType"
              [checked]="selectedEventTypes.includes(eventType)"
              (change)="onEventTypeChange(eventType, $event)"
            />
            {{ eventType }}
          </label>
        </div>
        <!-- Error Message -->
        <div *ngIf="serviceForm.get('eventTypes')?.errors?.['noEventTypesSelected']" class="error-message">
          At least one event type must be selected.
        </div>
      </div>
  
      <!-- Service Description -->
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea
          id="description"
          formControlName="description"
          rows="4"
        ></textarea>
        <div *ngIf="serviceForm.get('description')?.touched && serviceForm.get('description')?.errors?.['required']" class="error-message">
          Service description is required.
         </div>
      </div>
  
  
      <!-- Specifics -->
      <div class="form-group">
        <label for="specifics">Specifics:</label>
        <textarea
          id="specifics"
          formControlName="specifics"
          rows="2"
          placeholder="List any specific details about the service"
        ></textarea>
      </div>
  
      <!-- Price and Discount -->
      <div class="form-group">
        <label for="price">Price (â‚¬):</label>
        <input
          id="price"
          type="number"
          formControlName="price"
          placeholder="Enter the price"
          required
        />
        <div *ngIf="serviceForm.get('price')?.touched && serviceForm.get('price')?.errors?.['required']" class="error-message">
         Price is required.
        </div>
        <div *ngIf="serviceForm.get('price')?.touched && serviceForm.get('price')?.errors?.['min']" class="error-message">
          Price must be greater than 0.
        </div>
  
        <label for="discount">Discount:</label>
        <input
          id="discount"
          type="number"
          formControlName="discount"
          placeholder="Enter discount percentage (if any)"
        />
        <div *ngIf="serviceForm.get('discount')?.touched && serviceForm.get('discount')?.errors?.['min']" class="error-message">
          Discount must not be less than 0.
        </div>
      </div>

      <div class="form-group">
        <label>Uploaded Images:</label>
        <div class="photo-preview-container">
          <div class="photo-preview" *ngFor="let photo of photos; let i = index">
            <img [src]="photo" alt="Offer Photo" (error)="onPhotoError($event)" />
            <button type="button" class="remove-photo-btn" (click)="removePhoto(i)">
              &times;
            </button>
          </div>
        </div>
      </div>      
  
      <div class="form-group">
        <label class="add-photos-label">
          <input id="photos" type="file" formControlName="photos" multiple hidden (change)="onPhotosSelected($event)" />
          <span class="add-photos-btn">Add Photos</span>
        </label>
      </div>
  
      <!-- Visibility and Availability -->
      <div class="form-group checkbox-group">
        <label>
          <input id="visibility" type="checkbox" formControlName="visibility" />
          Visibility
        </label>
        <label>
          <input id="availability" type="checkbox" formControlName="availability" />
          Availability
        </label>
      </div>
  
      <!-- Service Duration -->
      <div class="form-group">
        <label>Duration Type:</label>
        <div class="checkbox-group">
          <label>
            <input
              type="radio"
              formControlName="durationType"
              value="fixed"
              (change)="onDurationTypeChange('fixed')"
            />
            Fixed
          </label>
          <label>
            <input
              type="radio"
              formControlName="durationType"
              value="varied"
              (change)="onDurationTypeChange('varied')"
            />
            Varied
          </label>
        </div>
      </div>  
  
      <!-- Fixed Duration -->
      <div *ngIf="isFixedDuration" class="form-group">
        <label for="duration">Fixed Duration (hours):</label>
        <input
          id="duration"
          type="number"
          formControlName="duration"
          placeholder="Enter duration in hours"
        />
        <div *ngIf="serviceForm.get('duration').touched && serviceForm.get('duration')?.errors?.['required']" class="error-message">
          Duration is required.
        </div>
        <div *ngIf="serviceForm.get('duration')?.touched && serviceForm.get('duration')?.errors?.['min']" class="error-message">
          Precise duration must be greater than 0.
        </div>
      </div>
  
      <!-- Varied Duration -->
      <div *ngIf="!isFixedDuration" class="form-group">
        <label for="minDuration">Min Duration (minutes):</label>
        <input
          id="minDuration"
          type="number"
          formControlName="minDuration"
          placeholder="Minimum duration"
        />
        <div *ngIf="serviceForm.get('minDuration')?.touched && serviceForm.get('minDuration')?.errors?.['required']" class="error-message">
          Minimal duration is required.
        </div>
        <div *ngIf="serviceForm.get('minDuration')?.touched && serviceForm.get('minDuration')?.errors?.['min']" class="error-message">
          Minimal duration must be greater than 0.
        </div>
  
        <label for="maxDuration">Max Duration (minutes):</label>
        <input
          id="maxDuration"
          type="number"
          formControlName="maxDuration"
          placeholder="Maximum duration"
        />
        <div *ngIf="serviceForm.get('maxDuration')?.touched && serviceForm.get('maxDuration')?.errors?.['required']" class="error-message">
          Maximal duration is required when precise duration is 0.
        </div>
        <div *ngIf="serviceForm.get('maxDuration')?.touched && serviceForm.get('maxDuration')?.errors?.['min']" class="error-message">
          Maximal duration must be greater than 0.
        </div>  
      </div>

  
      <!-- Reservation and Cancellation -->
      <div class="form-group">
        <label for="reservationDeadline">Reservation Deadline (hours):</label>
        <input
          id="reservationDeadline"
          type="number"
          formControlName="reservationDeadline"
          placeholder="Enter reservation deadline in hours"
        />
        <div *ngIf="serviceForm.get('reservationDeadline')?.touched && serviceForm.get('reservationDeadline')?.errors?.['required']" class="error-message">
          Reservation deadline is required.
        </div>
        <div *ngIf="serviceForm.get('reservationDeadline')?.touched && serviceForm.get('reservationDeadline')?.errors?.['min']" class="error-message">
          Reservation deadline must be greater than 0.
        </div>
  
        <label for="cancellationDeadline">Cancellation Deadline (hours):</label>
        <input
          id="cancellationDeadline"
          type="number"
          formControlName="cancellationDeadline"
          placeholder="Enter cancellation deadline in hours"
        />
        <div *ngIf="serviceForm.get('cancellationDeadline')?.touched && serviceForm.get('cancellationDeadline')?.errors?.['required']" class="error-message">
          Cancellation deadline is required.
        </div>
        <div *ngIf="serviceForm.get('cancellationDeadline')?.touched && serviceForm.get('cancellationDeadline')?.errors?.['min']" class="error-message">
          Cancellation deadline must be greater than 0.
        </div>
      </div>
  
      <!-- Reservation Confirmation -->
      <div class="form-group">
        <label for="confirmation">Reservation Confirmation:</label>
        <select
          id="confirmation"
          formControlName="confirmation"
        >
          <option value="automatic">Automatic</option>
          <option value="manual">Manual</option>
        </select>
      </div>  
  
      <!-- Submit Button -->
      <div class="form-actions">
        <button type="submit" [disabled]="serviceForm.invalid">
          Submit
        </button>
      </div>
    </form>
  </div>
  